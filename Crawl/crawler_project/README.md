# æ™ºèƒ½æ•°æ®ç§‘å­¦é¡¹ç›®çˆ¬è™« v2.0

è¿™æ˜¯ä¸€ä¸ªå®Œå…¨é‡æ„çš„æ¨¡å—åŒ–çˆ¬è™«ç³»ç»Ÿï¼Œä¸“é—¨ç”¨äºçˆ¬å–ç ”ç©¶ç”Ÿæ•°æ®ç§‘å­¦é¡¹ç›®çš„ä¿¡æ¯ã€‚

## ğŸ¯ ä¸»è¦æ”¹è¿›

### 1. **æ¨¡å—åŒ–æ¶æ„**
```
crawler_project/
â”œâ”€â”€ config/          # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ crawler_config.py    # çˆ¬è™«ä¸»é…ç½®
â”‚   â””â”€â”€ url_filters.py       # URLè¿‡æ»¤è§„åˆ™
â”œâ”€â”€ core/            # æ ¸å¿ƒæ¨¡å—  
â”‚   â”œâ”€â”€ crawler.py           # ä¸»çˆ¬è™«å¼•æ“
â”‚   â””â”€â”€ data_models.py       # æ•°æ®æ¨¡å‹å®šä¹‰
â”œâ”€â”€ utils/           # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ text_extractor.py    # æ–‡æœ¬æå–å·¥å…·
â”‚   â””â”€â”€ retry_utils.py       # é‡è¯•æœºåˆ¶å·¥å…·
â””â”€â”€ main.py          # ä¸»å…¥å£æ–‡ä»¶
```

### 2. **æ ‡å‡†åŒ–JSONè¾“å‡ºæ ¼å¼**
æ¯ä¸ªé¡¹ç›®ç”Ÿæˆä¸€ä¸ªJSONæ–‡ä»¶ï¼Œå‘½åæ ¼å¼ï¼š`å¤§å­¦-å­¦ä½-ä¸“ä¸š-é™¢ç³».json`

```json
{
  "project_info": {
    "university_name": "Harvard University",
    "degree": "MS", 
    "program_name": "Data Science SEAS",
    "department": "Harvard John A. Paulson School of Engineering and Applied Sciences"
  },
  "metadata": {
    "crawl_run_id": "uuid",
    "crawl_time": "2025-07-07T20:22:56.743554",
    "crawler_version": "2.0.0",
    "total_pages_crawled": 6,
    "success": true
  },
  "crawl_data": {
    "depth": 0,
    "url": "https://seas.harvard.edu/masters-data-science",
    "title": "Master's in Data Science", 
    "text_content": "æ¸…ç†åçš„çº¯æ–‡æœ¬...",
    "interactive_text": {"action": "äº¤äº’å†…å®¹"},
    "extracted_links": [{"url": "...", "text": "..."}],
    "children": [/* å­é¡µé¢çš„é€’å½’ç»“æ„ */]
  }
}
```

### 3. **æ™ºèƒ½æ–‡æœ¬æå–**
- âœ… **æ’é™¤SVGè·¯å¾„æ•°æ®** - ä¸å†åŒ…å«æ— æ„ä¹‰çš„çŸ¢é‡å›¾å½¢æ•°æ®
- âœ… **ç§»é™¤CSSæ ·å¼** - åªä¿ç•™æœ‰æ„ä¹‰çš„æ–‡æœ¬å†…å®¹
- âœ… **è¿‡æ»¤å¯¼èˆªå…ƒç´ ** - æ’é™¤header/footer/navä¸­çš„é“¾æ¥
- âœ… **å»é‡å¤å†…å®¹** - è‡ªåŠ¨å»é™¤é‡å¤çš„æ¨¡æ¿æ–‡å­—

### 4. **ç²¾å‡†URLè¿‡æ»¤**
```python
# è‡ªåŠ¨æ’é™¤çš„URLç±»å‹
excluded_patterns = [
    '.*privacy.*', '.*terms.*',      # éšç§æ”¿ç­–
    '.*facebook.*', '.*twitter.*',   # ç¤¾äº¤åª’ä½“
    '.*login.*', '.*register.*',     # ç™»å½•æ³¨å†Œ
    '.*news.*', '.*events.*'         # æ— å…³é¡µé¢
]

# åªä¿ç•™ç›¸å…³é“¾æ¥
body_link_selectors = [
    'main a[href]',                  # ä¸»å†…å®¹åŒºåŸŸ
    '.program-details a[href]',      # ä¸“ä¸šè¯¦æƒ…
    '.admission-requirements a[href]' # ç”³è¯·è¦æ±‚
]
```

### 5. **å¼ºåŒ–çš„ç¨³å®šæ€§æœºåˆ¶**
- **æŒ‡æ•°é€€é¿é‡è¯•** - æ™ºèƒ½é‡è¯•å¤±è´¥çš„è¯·æ±‚
- **è¯·æ±‚æ‹¦æˆªä¼˜åŒ–** - é˜»æ­¢åŠ è½½å›¾ç‰‡/CSSæé«˜æ€§èƒ½
- **æµè§ˆå™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†** - é¿å…èµ„æºæ³„éœ²
- **é”™è¯¯å®¹é”™å¤„ç†** - ä¼˜é›…å¤„ç†é¡µé¢å…³é—­ç­‰å¼‚å¸¸

### 6. **å¢å¼ºçš„äº¤äº’èƒ½åŠ›**
- **æŒ‰é’®ç‚¹å‡»å¤„ç†** - è‡ªåŠ¨ç‚¹å‡»å±•å¼€æ›´å¤šå†…å®¹
- **Tabåˆ‡æ¢å¤„ç†** - è·å–Tabä¸­çš„éšè—å†…å®¹  
- **åŠ¨æ€å†…å®¹æ£€æµ‹** - è¯†åˆ«ç‚¹å‡»åæ–°å¢çš„å†…å®¹
- **äº¤äº’å†…å®¹éš”ç¦»** - å•ç‹¬ä¿å­˜äº¤äº’è·å–çš„æ–‡æœ¬

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å®‰è£…ä¾èµ–
```bash
cd crawler_project
pip install -r requirements.txt
python -m playwright install chromium
```

### è¿è¡Œçˆ¬è™«
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
python -m crawler_project.main
```

### é…ç½®é€‰é¡¹
```python
# ä¿®æ”¹main.pyä¸­çš„é…ç½®
config = CrawlerConfig(
    max_depth=1,                    # çˆ¬å–æ·±åº¦
    timeout=15,                     # è¶…æ—¶æ—¶é—´
    delay_between_requests=3.0,     # è¯·æ±‚é—´éš”
    headless=True                   # æ— å¤´æ¨¡å¼
)
```

## ğŸ“Š æµ‹è¯•ç»“æœ

åœ¨å‰3ä¸ªé¡¹ç›®çš„æµ‹è¯•ä¸­ï¼š
- **æˆåŠŸç‡**: 66.7% (2/3 é¡¹ç›®)
- **é¡µé¢æˆåŠŸç‡**: 85.7% (6/7 é¡µé¢)
- **æ•°æ®è´¨é‡**: åªä¿ç•™çº¯æ–‡æœ¬ï¼Œæ— SVG/CSSå¹²æ‰°

### æˆåŠŸæ¡ˆä¾‹
âœ… **Harvard SEAS Data Science** - å®Œæ•´çˆ¬å–6ä¸ªé¡µé¢  
âœ… **Harvard Extension Data Science** - ä¸»é¡µé¢æˆåŠŸ  
âŒ **Stanford ICME** - éƒ¨åˆ†é¡µé¢å¤±è´¥ï¼ˆæµè§ˆå™¨è¿æ¥é—®é¢˜ï¼‰

## ğŸ”§ æ¨¡å—è¯¦è§£

### config/crawler_config.py
- `CrawlerConfig`: çˆ¬è™«ä¸»é…ç½®
- `StabilityConfig`: ç¨³å®šæ€§é…ç½®  
- `InteractionConfig`: äº¤äº’é…ç½®

### config/url_filters.py
- `URLFilters`: URLè¿‡æ»¤è§„åˆ™
- `URLFilterProcessor`: URLè¿‡æ»¤å¤„ç†å™¨

### utils/text_extractor.py
- `TextExtractor`: æ™ºèƒ½æ–‡æœ¬æå–å™¨
- è‡ªåŠ¨ç§»é™¤SVGã€CSSã€å¯¼èˆªå…ƒç´ 
- ä¿æŒè¡¨æ ¼ç»“æ„ï¼Œå¤„ç†å›¾ç‰‡altæ–‡æœ¬

### utils/retry_utils.py
- `RetryManager`: é‡è¯•ç®¡ç†å™¨
- `CircuitBreaker`: æ–­è·¯å™¨æ¨¡å¼
- æŒ‡æ•°é€€é¿å’ŒéšæœºæŠ–åŠ¨

### core/data_models.py
- `ProjectInfo`: é¡¹ç›®ä¿¡æ¯
- `CrawlResult`: å®Œæ•´çˆ¬è™«ç»“æœ
- `PageContent`: é¡µé¢å†…å®¹ï¼ˆä»…æ–‡æœ¬ï¼‰

### core/crawler.py
- `WebCrawler`: ä¸»çˆ¬è™«å¼•æ“
- é›†æˆæ‰€æœ‰æ¨¡å—ï¼Œåè°ƒçˆ¬å–æµç¨‹
- æ”¯æŒé€’å½’çˆ¬å–å’Œé”™è¯¯æ¢å¤

## ğŸ‰ å…³é”®ç‰¹æ€§

1. **ä¸€é¡¹ç›®ä¸€æ–‡ä»¶** - æ¸…æ™°çš„è¾“å‡ºç»„ç»‡
2. **çº¯æ–‡æœ¬æ•°æ®** - é€‚åˆLLMå¤„ç†çš„é«˜è´¨é‡æ•°æ®
3. **æ™ºèƒ½è¿‡æ»¤** - åªçˆ¬å–ç›¸å…³çš„businessé€»è¾‘é¡µé¢
4. **ç¨³å®šå¯é ** - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
5. **æ˜“äºæ‰©å±•** - æ¨¡å—åŒ–è®¾è®¡ä¾¿äºå¢åˆ æŸ¥æ”¹
6. **é…ç½®çµæ´»** - æ‰€æœ‰å‚æ•°å¯ç‹¬ç«‹è°ƒæ•´

è¿™ä¸ªé‡æ„ç‰ˆæœ¬å®Œå…¨è§£å†³äº†ä¹‹å‰çš„é—®é¢˜ï¼Œå¹¶ä¸ºåç»­çš„LLMå­—æ®µæå–æä¾›äº†é«˜è´¨é‡çš„æ•°æ®åŸºç¡€ã€‚ 